(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/subPages/demand-detail/demand-detail"],{"09e9":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n("a34a")),a=n("2f62"),i=n("25d2"),o=n("c360");function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,u,"next",e)}function u(e){c(i,r,a,o,u,"throw",e)}o(void 0)})}}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){return n.e("pages/home/subPages/demand-detail/children/demand-person").then(n.bind(null,"6ba7"))},p=function(){return n.e("pages/home/subPages/demand-detail/children/demand-info").then(n.bind(null,"35a6"))},h=function(){return n.e("pages/home/subPages/demand-detail/children/demand-offer").then(n.bind(null,"f1ac"))},m=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"09fe"))},b=function(){return n.e("components/header-bar").then(n.bind(null,"b7ae"))},g={name:"",data:function(){return{isOffer:!1,id:"",showPopup:!1,price:"",user_id:""}},onLoad:function(t){this.id=t.id,this.user_id=e.getStorageSync("user_id")},onShow:function(){this._reqGetDemandDetail(),this.$hideTabbarButton()},computed:d({},(0,a.mapState)(["demand_detail","demandImg","user_info"])),methods:d({},(0,a.mapActions)(["reqGetDemandDetail","reqGetDemandList"]),{onOfferEvent:function(){var t=s(r.default.mark(function t(){var n,a;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this,""!=this.price){t.next=4;break}return e.showToast({title:"请输入报价金额",icon:"none"}),t.abrupt("return");case 4:return t.next=6,(0,i.joinOffer)({token:e.getStorageSync("token"),bid:this.id,price:this.price});case 6:a=t.sent,200==a.code&&(this.price="",this.showPopup=!1,e.showToast({title:"报价成功"}),setTimeout(function(){n._reqGetDemandDetail(),n.reqGetDemandList({page:1,sort:0,order:2})},1500));case 8:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),onOfferClick:function(){var t=s(r.default.mark(function t(n){var a,u;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=this,(0,o.dealLogin)(this.id)){t.next=3;break}return t.abrupt("return");case 3:if(!n){t.next=7;break}this.showPopup=!0,t.next=11;break;case 7:return t.next=9,(0,i.cancelOffer)({token:e.getStorageSync("token"),sid:this.id});case 9:u=t.sent,200==u.code&&(e.showToast({title:"撤销成功"}),setTimeout(function(){a._reqGetDemandDetail(),a.reqGetDemandList({page:1,sort:0,order:2})},1500));case 11:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),togglePopup:function(){this.showPopup=!1},_reqGetDemandDetail:function(){var t=e.getStorageSync("token");this.reqGetDemandDetail({xid:this.id,token:t})},onAttentionEvent:function(){var t=s(r.default.mark(function t(n){var a,u,c,s,d;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=n.type,u=n.id,(0,o.dealLogin)(this.id)){t.next=3;break}return t.abrupt("return");case 3:if(c=this,(0,o.dealLogin)(c.id)){t.next=6;break}return t.abrupt("return");case 6:if(0!=a){t.next=11;break}return t.next=9,(0,i.addAttention)({tid:u,token:e.getStorageSync("token")});case 9:s=t.sent,200==s.code&&setTimeout(function(){c._reqGetDemandDetail()},1e3);case 11:if(1!=a){t.next=16;break}return t.next=14,(0,i.cancelAttention)({tid:u,token:e.getStorageSync("token")});case 14:d=t.sent,200==d.code&&c._reqGetDemandDetail();case 16:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),onCollectEvent:function(){var t=s(r.default.mark(function t(n){var a,u,c;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if((0,o.dealLogin)(this.id)){t.next=2;break}return t.abrupt("return");case 2:if(a=this,0!=n){t.next=8;break}return t.next=6,(0,i.collectDemand)({sid:this.id,token:e.getStorageSync("token")});case 6:u=t.sent,2e3==u.code&&a._reqGetDemandDetail();case 8:if(1!=n){t.next=13;break}return t.next=11,(0,i.cancelCollect)({sid:this.id,token:e.getStorageSync("token")});case 11:c=t.sent,2e3==c.code&&a._reqGetDemandDetail();case 13:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),onContactEvent:function(t){(0,o.dealLogin)(this.id)&&e.navigateTo({url:"/pages/mine/subPages/contact-us/contact-us?id="+t})}}),components:{demandPerson:l,demandInfo:p,demandOffer:h,uniPopup:m,headerBar:b}};t.default=g}).call(this,n("6e42")["default"])},"1f43":function(e,t,n){"use strict";var r=n("da31"),a=n.n(r);a.a},5113:function(e,t,n){"use strict";n.r(t);var r=n("09e9"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=a.a},"8cf8":function(e,t,n){"use strict";n.r(t);var r=n("ac86"),a=n("5113");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("1f43");var o=n("2877"),u=Object(o["a"])(a["default"],r["a"],r["b"],!1,null,"b40253be",null);t["default"]=u.exports},ac86:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},da31:function(e,t,n){}},[["5c12","common/runtime","common/vendor"]]]);