(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/address-edit/address-edit"],{"4dc8":function(t,e,n){},"60c7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),r=(a(n("97ca")),n("25d2")),s=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(u){return void n(u)}o.done?e(c):Promise.resolve(c).then(i,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(t){o(s,i,r,a,c,"next",t)}function c(t){o(s,i,r,a,c,"throw",t)}a(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){d(t,e,n[e])})}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){return n.e("components/input-cell").then(n.bind(null,"b545"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/mpvue-citypicker/mpvueCityPicker")]).then(n.bind(null,"1e12"))},h={name:"",data:function(){return{isDefault:0,id:"",name:"",phone:"",postcode:"",address:"",province:"",city:"",district:"",detail:"",token:""}},onLoad:function(e){this.token=t.getStorageSync("token"),e.id&&(this.id=e.id,this._echoContent(),this._setNavigationBarButton())},onNavigationBarButtonTap:function(){this.id&&this._delAddress()},computed:{fixTop:function(){return t.getSystemInfoSync().windowHeight-70+"px"}},methods:u({},(0,s.mapActions)(["reqGetAddressList"]),{_echoContent:function(){var t=c(i.default.mark(function t(){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.getAddressDetail)({address_id:this.id,token:this.token});case 2:e=t.sent,this.name=e.data.name,this.phone=e.data.phone,this.postcode=e.data.zipcode,this.address=e.data.province+"-"+e.data.city+"-"+e.data.district,this.province=e.data.province,this.city=e.data.city,this.district=e.data.district,this.detail=e.data.detailed,this.isDefault=e.data.default;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),_delAddress:function(){var e=c(i.default.mark(function e(){var n;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,t.showModal({content:"确定要删除吗?",success:function(){var e=c(i.default.mark(function e(s){var a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!s.confirm){e.next=5;break}return e.next=3,(0,r.delAddress)({token:n.token,aid:n.id});case 3:a=e.sent,2e3==a.code&&(t.showToast({title:"删除成功"}),setTimeout(function(){t.navigateBack(),n.reqGetAddressList({token:n.token})},1500));case 5:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}()});case 2:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),onSaveAddressClick:function(){var e=c(i.default.mark(function e(){var n,s,a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,""!=this.name){e.next=4;break}return t.showToast({title:"请输入联系人姓名",icon:"none"}),e.abrupt("return");case 4:if(""!=this.phone){e.next=7;break}return t.showToast({title:"请输入联系人手机",icon:"none"}),e.abrupt("return");case 7:if(""!=this.postcode){e.next=10;break}return t.showToast({title:"请输入邮政编码",icon:"none"}),e.abrupt("return");case 10:if(""!=this.address){e.next=13;break}return t.showToast({title:"请输入收货地址",icon:"none"}),e.abrupt("return");case 13:if(a={token:this.token,aid:this.id||"",province:this.province,city:this.city,district:this.district,detailed:this.detail,name:this.name,zipcode:this.postcode,phone:this.phone,default:this.isDefault},!this.id){e.next=20;break}return e.next=17,(0,r.editAddress)(a);case 17:s=e.sent,e.next=23;break;case 20:return e.next=22,(0,r.addAddress)(a);case 22:s=e.sent;case 23:2e3==s.code&&(t.showToast({title:"保存成功"}),setTimeout(function(){n.reqGetAddressList({token:n.token}),t.navigateBack()},1500));case 24:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),onConfirm:function(t){console.log(t," at pages\\mine\\subPages\\address-edit\\address-edit.vue:163"),this.address=t.label,this.province=t.label.split("-")[0],this.city=t.label.split("-")[1],this.district=t.label.split("-")[2]},onSetDefault:function(){this.isDefault=0==this.isDefault?1:0},onInputClick:function(){this.$refs.mpvueCityPicker.show()},_setNavigationBarButton:function(){var t=getCurrentPages(),e=t[t.length-1],n=e.$getAppWebview(),i=n.getStyle().titleNView;console.log(JSON.stringify(i)," at pages\\mine\\subPages\\address-edit\\address-edit.vue:182"),i.buttons&&(i.buttons[0].text="删 除",i.buttons[0].fontSize="14px",n.setStyle({titleNView:i}))}}),components:{inputCell:l,mpvueCityPicker:f}};e.default=h}).call(this,n("6e42")["default"])},"63a1":function(t,e,n){"use strict";n.r(e);var i=n("60c7"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=r.a},b7d4:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},c3a2:function(t,e,n){"use strict";n.r(e);var i=n("b7d4"),r=n("63a1");for(var s in r)"default"!==s&&function(t){n.d(e,t,function(){return r[t]})}(s);n("ffe3");var a=n("2877"),o=Object(a["a"])(r["default"],i["a"],i["b"],!1,null,"c69e9f7e",null);e["default"]=o.exports},ffe3:function(t,e,n){"use strict";var i=n("4dc8"),r=n.n(i);r.a}},[["98d6","common/runtime","common/vendor"]]]);