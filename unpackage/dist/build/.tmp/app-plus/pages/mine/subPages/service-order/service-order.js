(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/subPages/service-order/service-order"],{"5a4b":function(e,t,n){},6613:function(e,t,n){"use strict";var r=n("5a4b"),o=n.n(r);o.a},"664e":function(e,t,n){"use strict";n.r(t);var r=n("7fcf"),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=o.a},"7fcf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("a34a")),o=n("2f62"),i=n("25d2");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,o,i,s){try{var u=e[i](s),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){u(i,r,o,s,a,"next",e)}function a(e){u(i,r,o,s,a,"throw",e)}s(void 0)})}}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){return n.e("components/order-item").then(n.bind(null,"56b6"))},l=function(){return n.e("components/empty").then(n.bind(null,"d923"))},p=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"fbdd"))},h=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"09fe"))},g={name:"",data:function(){return{orderType:["全部","待付款","待发货","待收货","待退款"],current:0,sort:0,page:1,status:"more",showPopup:!1,orderId:"",deliveryId:""}},onLoad:function(e){e.index&&(this.sort=e.index,this.current=e.index),this._reqGetOrderList1()},onShow:function(){this.$hideTabbarButton()},computed:c({},(0,o.mapState)(["order_list1"])),onReachBottom:function(){"noMore"!=this.status&&this._reqGetOrderList1()},methods:c({},(0,o.mapActions)(["reqGetOrderList1","reqGetUserInfo"]),{_reqGetUserInfo:function(){this.reqGetUserInfo({token:e.getStorageSync("token")})},onOperation:function(){var t=a(r.default.mark(function t(n){var o,s,u,c,d,f;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=n.type,s=n.item,console.log(o,s," at pages\\mine\\subPages\\service-order\\service-order.vue:86"),u=this,"取消订单"==o&&e.showModal({content:"确定要取消订单吗？",success:function(){var t=a(r.default.mark(function t(n){var o;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=6;break}return t.next=3,(0,i.delOrder)({iid:s.id,token:e.getStorageSync("token")});case 3:o=t.sent,console.log(o," at pages\\mine\\subPages\\service-order\\service-order.vue:97"),200==o.code&&(u.page=1,u._reqGetOrderList1());case 6:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()}),"联系TA"==o&&e.navigateTo({url:"/pages/mine/subPages/contact-us/contact-us?id="+s.j_user[0].id}),"付款"==o&&e.navigateTo({url:"/pages/mall/subPages/confirm-order/confirm-order?id="+s.j_commodity.id}),"催发货"!=o){t.next=11;break}return t.next=9,(0,i.urgeDelivery)({iid:s.id,token:e.getStorageSync("token")});case 9:c=t.sent,200==c.code&&e.showToast({title:"已催促卖家尽快发货",icon:"none"});case 11:if("确认收货"==o&&e.showModal({content:"确保收到货后再执行此操作,确定继续吗？",success:function(){var t=a(r.default.mark(function t(n){var o;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=6;break}return t.next=3,(0,i.confirmDelivery)({iid:s.id,token:e.getStorageSync("token")});case 3:o=t.sent,console.log(o," at pages\\mine\\subPages\\service-order\\service-order.vue:137"),200==o.code&&(this.page=1,u._reqGetOrderList1());case 6:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()}),"查看物流"==o&&e.navigateTo({url:"/pages/mine/subPages/order-fllow/order-fllow?id="+s.id}),"评价"==o&&e.navigateTo({url:"/pages/mine/subPages/goods-comment/goods-comment?id="+s.j_commodity.id+"&orderId="+s.id}),"发货"==o&&(this.orderId=s.id,this.showPopup=!0),"确认退款"!=o){t.next=20;break}return t.next=18,(0,i.confirmRefund)({iid:s.id,token:e.getStorageSync("token")});case 18:d=t.sent,200==d.code&&(e.showToast({title:"退款成功"}),setTimeout(function(){u._reqGetOrderList1(),u._reqGetUserInfo()},1500));case 20:if("拒绝退款"!=o){t.next=25;break}return t.next=23,(0,i.refuseRefund)({iid:s.id,token:e.getStorageSync("token")});case 23:f=t.sent,200==f.code&&(e.showToast({title:"退款已拒绝"}),setTimeout(function(){u._reqGetOrderList1(),u._reqGetUserInfo()},1500));case 25:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),onConfirmDelivery:function(){var t=a(r.default.mark(function t(){var n,o;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this,""==this.deliveryId&&(e.showToast({title:"请输入快递单号",icon:"none"}),reutrn),t.next=4,(0,i.deliveryGoods)({iid:this.orderId,track:this.deliveryId});case 4:o=t.sent,console.log(o," at pages\\mine\\subPages\\service-order\\service-order.vue:204"),200==o.code&&(e.showToast({title:"发货成功"}),setTimeout(function(){n.showPopup=!1,n.deliveryId="",n._reqGetOrderList1(),n._reqGetUserInfo()},1500));case 7:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),_reqGetOrderList1:function(){this.status="loading",this.reqGetOrderList1({token:e.getStorageSync("token"),sort:this.sort,page:this.page,callBack1:this.addPage,callBack2:this.changeStatus})},changeStatus:function(e){this.status=e},addPage:function(){this.page++},onChoseOrderTypeClick:function(e){this.current!=e&&(this.page=1,this.sort=e,this.current=e,this._reqGetOrderList1())},togglePopup:function(){this.showPopup=!1}}),components:{orderItem:f,uniLoadMore:p,empty:l,uniPopup:h}};t.default=g}).call(this,n("6e42")["default"])},"8b9a":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},fe77:function(e,t,n){"use strict";n.r(t);var r=n("8b9a"),o=n("664e");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("6613");var s=n("2877"),u=Object(s["a"])(o["default"],r["a"],r["b"],!1,null,"39f7129b",null);t["default"]=u.exports}},[["f095","common/runtime","common/vendor"]]]);