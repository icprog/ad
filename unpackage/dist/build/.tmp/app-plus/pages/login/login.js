(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{5534:function(e,n,t){"use strict";var o=t("d520"),r=t.n(o);r.a},7056:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},r=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r})},"70bb":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(t("a34a")),r=t("c360"),i=t("25d2"),a=t("2f62");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,n,t,o,r,i,a){try{var u=e[i](a),s=u.value}catch(c){return void t(c)}u.done?n(s):Promise.resolve(s).then(o,r)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function a(e){s(i,o,r,a,u,"next",e)}function u(e){s(i,o,r,a,u,"throw",e)}a(void 0)})}}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){f(e,n,t[n])})}return e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d=function(){return t.e("components/login-top").then(t.bind(null,"4ff2"))},p=function(){return t.e("components/input-cell").then(t.bind(null,"b545"))},h=function(){return t.e("components/third-login").then(t.bind(null,"7704"))},g={name:"",data:function(){return{phone:"",pwd:"",methodList:["密码登录","验证码登录"],current:0,count:0,sms:"",tel:"",animationData:{}}},onLoad:function(){e.onWindowResize(function(e){console.log(e," at pages\\login\\login.vue:64")})},onShow:function(){this._createAnimation()},onNavigationBarButtonTap:function(){e.navigateTo({url:"/pages/login/demand-login"})},methods:l({},(0,a.mapActions)(["reqGetSms"]),{_createAnimation:function(){var n=e.createAnimation({transformOrigin:"50% 50%",duration:1500,timingFunction:"ease",delay:0});n.rotateX(360).step(),this.animationData=n.export()},onThirdLoginEvent:function(){var n=c(o.default.mark(function n(t){return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:"微信"==t.name&&e.login({provider:"weixin",success:function(){var n=c(o.default.mark(function n(t){var r;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.authResult," at pages\\login\\login.vue:94"),n.next=3,(0,i.weixinLogin)({openid:t.authResult.openid});case 3:r=n.sent,console.log("result:",r," at pages\\login\\login.vue:98"),211==r.code&&e.navigateTo({url:"/pages/login/bind-phone?openid="+t.authResult.openid}),200==r.code&&(e.reLaunch({url:"/pages/home/index/index"}),e.setStorage({key:"user_id",data:r.data.user_id}),e.setStorage({key:"token",data:r.data.token}));case 7:case"end":return n.stop()}},n,this)}));function t(e){return n.apply(this,arguments)}return t}(),fail:function(e){console.log(e," at pages\\login\\login.vue:119")}}),"QQ"==t.name&&e.showToast({title:"暂不支持",icon:"none"});case 2:case"end":return n.stop()}},n,this)}));function t(e){return n.apply(this,arguments)}return t}(),onMethodTypeClick:function(e){this.current=e},onLoginEvent:function(){var n=c(o.default.mark(function n(){var t,a,u;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(this,0!=this.current){n.next=14;break}if(""!=this.phone){n.next=5;break}return e.showToast({title:"请输入账号",icon:"none"}),n.abrupt("return");case 5:if(""!=this.pwd){n.next=8;break}return e.showToast({title:"请输入密码",icon:"none"}),n.abrupt("return");case 8:return n.next=10,(0,i.login)({account:this.phone,password:this.pwd});case 10:return t=n.sent,console.log(t," at pages\\login\\login.vue:154"),"登录成功"==t.msg&&(e.getStorageSync("pageRoute"),e.reLaunch({url:"/pages/home/index/index"}),e.setStorage({key:"user_id",data:t.code.userinfo.user_id}),e.setStorage({key:"token",data:t.code.userinfo.token})),n.abrupt("return");case 14:if(1!=this.current){n.next=24;break}if(a=(0,r.verifyPhone)(this.tel),!a){n.next=24;break}if(""!=this.sms){n.next=20;break}return e.showToast({title:"请输入验证码",icon:"none"}),n.abrupt("return");case 20:return n.next=22,(0,i.smsLogin)({mobile:this.tel,captcha:this.sms});case 22:u=n.sent,"登录成功"==u.msg&&(e.getStorageSync("pageRoute"),e.reLaunch({url:"/pages/home/index/index"}),e.setStorage({key:"user_id",data:u.code.userinfo.user_id}),e.setStorage({key:"token",data:u.code.userinfo.token}));case 24:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),onGetSmsEvent:function(){var e=this,n=(0,r.verifyPhone)(this.tel);n&&this.reqGetSms({mobile:this.tel,callBack:r.dealCountDown,self:e})},onRegisterEvent:function(){}}),components:{loginTop:d,inputCell:p,thirdLogin:h}};n.default=g}).call(this,t("6e42")["default"])},8970:function(e,n,t){"use strict";t.r(n);var o=t("7056"),r=t("c309");for(var i in r)"default"!==i&&function(e){t.d(n,e,function(){return r[e]})}(i);t("5534");var a=t("2877"),u=Object(a["a"])(r["default"],o["a"],o["b"],!1,null,"2e856869",null);n["default"]=u.exports},c309:function(e,n,t){"use strict";t.r(n);var o=t("70bb"),r=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);n["default"]=r.a},d520:function(e,n,t){}},[["2205","common/runtime","common/vendor"]]]);