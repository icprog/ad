{"version":3,"sources":["webpack:///C:/Users/HP/Desktop/project/ad/main.js","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?cab5","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?e360","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?e28b","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?6812","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?1265","webpack:///C:/Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue?a119"],"names":["createPage","Page","name","data","text","id","user_id","list","page","sendInfo","receiveInfo","onLoad","options","uni","getStorageSync","_getChatRecord","_getChatAvatar","onShow","$hideTabbarButton","_connect","computed","BASE_URL","scrollHeight","getSystemInfoSync","windowHeight","methods","onSendMessageClick","obj","json","JSON","stringify","console","log","push","sendSocketMessage","setTimeout","_onScrollTo","token","other","result","view","createSelectorQuery","select","boundingClientRect","pageScrollTo","scrollTop","height","duration","exec","setNavigationBarTitle","title","username","self","connectSocket","url","SOCKET_URL","onSocketOpen","res","onSocketMessage","parse","vibrateLong","success","onSocketError","onSocketClose"],"mappings":"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","file":"pages/mine/subPages/contact-us/contact-us.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/mine/subPages/contact-us/contact-us.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./contact-us.vue?vue&type=template&id=de07c618&scoped=true&\"\nimport script from \"./contact-us.vue?vue&type=script&lang=js&\"\nexport * from \"./contact-us.vue?vue&type=script&lang=js&\"\nimport style0 from \"./contact-us.vue?vue&type=style&index=0&id=de07c618&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de07c618\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('de07c618', component.options)\n    } else {\n      api.reload('de07c618', component.options)\n    }\n    module.hot.accept(\"./contact-us.vue?vue&type=template&id=de07c618&scoped=true&\", function () {\n      api.rerender('de07c618', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/HP/Desktop/project/ad/pages/mine/subPages/contact-us/contact-us.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contact-us.vue?vue&type=template&id=de07c618&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contact-us.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contact-us.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BASE_URL, SOCKET_URL, getChatRecord, getChatAvatar } from '@/api'\nexport default {\n\tname: '',\n\tdata () {\n\t\treturn {\n\t\t\ttext: '',\n\t\t\tid: '', // 对方id\n\t\t\tuser_id: '',// 我的id\n\t\t\tlist: [],\n\t\t\tpage: 1,\n\t\t\tsendInfo: {},\n\t\t\treceiveInfo: {}\n\t\t}\n\t},\n\tonLoad (options) {\n\t\tthis.id = options.id;\n\t\tthis.user_id = uni.getStorageSync('user_id')\n\t\tthis._getChatRecord()\n\t\tthis._getChatAvatar()\n\t},\n\tonShow () {\n\t\tthis.$hideTabbarButton()\n\t\tthis._connect()\n\t},\n\tcomputed: {\n\t\tBASE_URL () {\n\t\t\treturn BASE_URL\n\t\t},\n\t\tscrollHeight () {\n\t\t\treturn uni.getSystemInfoSync().windowHeight\n\t\t}\n\t},\n\tmethods: {\n\t\tonSendMessageClick () {      // 发送\n\t\t\tif(this.text == '') {return}\n\t\t\tlet obj = {\n\t\t\t\t\"send\": this.user_id,\n\t\t\t\t\"receive\": this.id,\n\t\t\t\t\"data-text\": this.text\n\t\t\t};\n\t\t\tlet json = JSON.stringify(obj)\n\t\t\tconsole.log(json)\n\t\t\tthis.list.push({\n\t\t\t\tdata: obj,\n\t\t\t\treceiveInfo: this.receiveInfo,\n\t\t\t\tsendInfo: this.sendInfo\n\t\t\t})\n\t\t\tthis.text = '';\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata: json\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._onScrollTo() \n\t\t\t}, 1000)\n\t\t},\n\t\tasync _getChatRecord() {     // 获取聊天记录\n\t\t\tlet result = await getChatRecord ({\n\t\t\t\ttoken: uni.getStorageSync('token'),\n\t\t\t\tother: this.id,\n\t\t\t\tpage: this.page,\n\t\t\t})\n\t\t\tthis.list = result.data;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._onScrollTo() \n\t\t\t}, 1000)\n\t\t},\n\t\t_onScrollTo () {\n\t\t\tlet view = uni.createSelectorQuery().select(\".wrap\");\n\t\t\tview.boundingClientRect(data => {\n\t\t\t\tconsole.log(\"得到布局位置信息\" + JSON.stringify(data));\n\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\tscrollTop: data.height,\n\t\t\t\t\tduration: 10\n\t\t\t\t});\n\t\t\t}).exec();\n\t\t},\n\t\tasync _getChatAvatar () {\n\t\t\tlet receiveInfo = await getChatAvatar({\n\t\t\t\tuser_id: this.id\n\t\t\t})\n\t\t\tthis.receiveInfo = receiveInfo.data;\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle: receiveInfo.data.username\n\t\t\t})\n\t\t\tlet sendInfo = await getChatAvatar({\n\t\t\t\tuser_id: this.user_id\n\t\t\t})\n\t\t\tthis.sendInfo = sendInfo.data;\n\t\t},\n\t\t_connect () {\n\t\t\tlet self = this;\n\t\t\tuni.connectSocket({\n\t\t\t\turl: SOCKET_URL + '?id=' + uni.getStorageSync('user_id')\n\t\t\t});\n\t\t\tuni.onSocketOpen(function (res) {\n\t\t\t\tconsole.log('WebSocket连接已打开！');\n\t\t\t});\n\t\t\tuni.onSocketMessage(function (res) {\n\t\t\t\tconsole.log('收到服务器内容：' + res.data);\n\t\t\t\tlet obj = JSON.parse(res.data);\n\t\t\t\tconsole.log(self.receiveInfo)\n\t\t\t\tconsole.log(self.sendInfo)\n\t\t\t\tself.list.push({\n\t\t\t\t\tdata: obj,\n\t\t\t\t\treceiveInfo: self.sendInfo,\n\t\t\t\t\tsendInfo: self.receiveInfo\n\t\t\t\t})\n\t\t\t\tuni.vibrateLong({\n\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\tconsole.log('success');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tuni.onSocketError(function (res) {\n\t\t\t\tconsole.log('WebSocket连接打开失败，请检查！');\n\t\t\t});\n\t\t\tuni.onSocketClose(function (res) {\n\t\t\t\tconsole.log('WebSocket 已关闭！');\n\t\t\t\tself._connect()\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contact-us.vue?vue&type=style&index=0&id=de07c618&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contact-us.vue?vue&type=style&index=0&id=de07c618&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}